<html>
<head>
	<title>nes</title>
	<script src="//rawgithub.com/caolan/async/master/lib/async.js"></script>
	<script src="/nes/constants.js"></script>
	<script src="/nes/system.js"></script>
	<script src="/nes/cpu.js"></script>
	<script src="/nes/ppu.js"></script>
	<script src="/nes/cartridge.js"></script>
	<script src="/nes/mapper.js"></script>
</head>

<body>

<input type="file" id="romselect">
<canvas id="c" width="256" height="256"></canvas>

<script type="text/javascript">
document.getElementById("romselect").addEventListener
(
	"change",
	function(E)
	{
		var FR = new FileReader();

		FR.addEventListener
		(
			"load",
			function()
			{
				if (FR.error) return console.log("error reading the ROM", FR.error);
				var System = new NES.System();
				System.LoadCartridge(new Uint8Array(FR.result));
			}
		);

		FR.readAsArrayBuffer(E.target.files[0]);
	}
);
</script>
</body>
</html>
